{"version":3,"sources":["useVirtualizerScrollView.js"],"sourcesContent":["import * as React from 'react';\nimport { slot, useMergedRefs } from '@fluentui/react-utilities';\nimport { useVirtualizer_unstable } from '../Virtualizer/useVirtualizer';\nimport { useStaticVirtualizerMeasure } from '../../Hooks';\nimport { useImperativeHandle } from 'react';\nimport { scrollToItemStatic } from '../../Utilities';\nimport { useStaticVirtualizerPagination } from '../../hooks/useStaticPagination';\nexport function useVirtualizerScrollView_unstable(props) {\n    const { imperativeRef, itemSize, numItems, axis = 'vertical', reversed, enablePagination = false } = props;\n    var _props_axis;\n    const { virtualizerLength, bufferItems, bufferSize, scrollRef } = useStaticVirtualizerMeasure({\n        defaultItemSize: props.itemSize,\n        direction: (_props_axis = props.axis) !== null && _props_axis !== void 0 ? _props_axis : 'vertical'\n    });\n    // Store the virtualizer length as a ref for imperative ref access\n    const virtualizerLengthRef = React.useRef(virtualizerLength);\n    if (virtualizerLengthRef.current !== virtualizerLength) {\n        virtualizerLengthRef.current = virtualizerLength;\n    }\n    const paginationRef = useStaticVirtualizerPagination({\n        axis,\n        itemSize\n    }, enablePagination);\n    const scrollViewRef = useMergedRefs(props.scrollViewRef, scrollRef, paginationRef);\n    const imperativeVirtualizerRef = React.useRef(null);\n    const scrollCallbackRef = React.useRef(null);\n    useImperativeHandle(imperativeRef, ()=>{\n        var _imperativeVirtualizerRef_current;\n        return {\n            scrollTo (index, behavior = 'auto', callback) {\n                var _imperativeVirtualizerRef_current;\n                scrollCallbackRef.current = callback !== null && callback !== void 0 ? callback : null;\n                (_imperativeVirtualizerRef_current = imperativeVirtualizerRef.current) === null || _imperativeVirtualizerRef_current === void 0 ? void 0 : _imperativeVirtualizerRef_current.setFlaggedIndex(index);\n                scrollToItemStatic({\n                    index,\n                    itemSize,\n                    totalItems: numItems,\n                    scrollViewRef,\n                    axis,\n                    reversed,\n                    behavior\n                });\n            },\n            currentIndex: (_imperativeVirtualizerRef_current = imperativeVirtualizerRef.current) === null || _imperativeVirtualizerRef_current === void 0 ? void 0 : _imperativeVirtualizerRef_current.currentIndex,\n            virtualizerLength: virtualizerLengthRef\n        };\n    }, [\n        axis,\n        scrollViewRef,\n        itemSize,\n        numItems,\n        reversed\n    ]);\n    const handleRenderedIndex = (index)=>{\n        if (scrollCallbackRef.current) {\n            scrollCallbackRef.current(index);\n        }\n    };\n    const virtualizerState = useVirtualizer_unstable({\n        ...props,\n        virtualizerLength,\n        bufferItems,\n        bufferSize,\n        scrollViewRef,\n        onRenderedFlaggedIndex: handleRenderedIndex,\n        imperativeVirtualizerRef\n    });\n    return {\n        ...virtualizerState,\n        components: {\n            ...virtualizerState.components,\n            container: 'div'\n        },\n        container: slot.always(props.container, {\n            defaultProps: {\n                ref: scrollViewRef\n            },\n            elementType: 'div'\n        })\n    };\n}\n"],"names":["useVirtualizerScrollView_unstable","props","imperativeRef","itemSize","numItems","axis","reversed","enablePagination","_props_axis","virtualizerLength","bufferItems","bufferSize","scrollRef","useStaticVirtualizerMeasure","defaultItemSize","direction","virtualizerLengthRef","React","useRef","current","paginationRef","useStaticVirtualizerPagination","scrollViewRef","useMergedRefs","imperativeVirtualizerRef","scrollCallbackRef","useImperativeHandle","_imperativeVirtualizerRef_current","scrollTo","index","behavior","callback","setFlaggedIndex","scrollToItemStatic","totalItems","currentIndex","handleRenderedIndex","virtualizerState","useVirtualizer_unstable","onRenderedFlaggedIndex","components","container","slot","always","defaultProps","ref","elementType"],"mappings":";;;;+BAOgBA;;;eAAAA;;;;iEAPO;gCACa;gCACI;uBACI;2BAET;qCACY;AACxC,SAASA,kCAAkCC,KAAK;IACnD,MAAM,EAAEC,aAAa,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,OAAO,UAAU,EAAEC,QAAQ,EAAEC,mBAAmB,KAAK,EAAE,GAAGN;IACrG,IAAIO;IACJ,MAAM,EAAEC,iBAAiB,EAAEC,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAE,GAAGC,IAAAA,kCAA2B,EAAC;QAC1FC,iBAAiBb,MAAME,QAAQ;QAC/BY,WAAW,AAACP,CAAAA,cAAcP,MAAMI,IAAI,AAAD,MAAO,QAAQG,gBAAgB,KAAK,IAAIA,cAAc;IAC7F;IACA,kEAAkE;IAClE,MAAMQ,uBAAuBC,OAAMC,MAAM,CAACT;IAC1C,IAAIO,qBAAqBG,OAAO,KAAKV,mBAAmB;QACpDO,qBAAqBG,OAAO,GAAGV;IACnC;IACA,MAAMW,gBAAgBC,IAAAA,mDAA8B,EAAC;QACjDhB;QACAF;IACJ,GAAGI;IACH,MAAMe,gBAAgBC,IAAAA,6BAAa,EAACtB,MAAMqB,aAAa,EAAEV,WAAWQ;IACpE,MAAMI,2BAA2BP,OAAMC,MAAM,CAAC;IAC9C,MAAMO,oBAAoBR,OAAMC,MAAM,CAAC;IACvCQ,IAAAA,0BAAmB,EAACxB,eAAe;QAC/B,IAAIyB;QACJ,OAAO;YACHC,UAAUC,KAAK,EAAEC,WAAW,MAAM,EAAEC,QAAQ;gBACxC,IAAIJ;gBACJF,kBAAkBN,OAAO,GAAGY,aAAa,QAAQA,aAAa,KAAK,IAAIA,WAAW;gBACjFJ,CAAAA,oCAAoCH,yBAAyBL,OAAO,AAAD,MAAO,QAAQQ,sCAAsC,KAAK,IAAI,KAAK,IAAIA,kCAAkCK,eAAe,CAACH;gBAC7LI,IAAAA,6BAAkB,EAAC;oBACfJ;oBACA1B;oBACA+B,YAAY9B;oBACZkB;oBACAjB;oBACAC;oBACAwB;gBACJ;YACJ;YACAK,cAAc,AAACR,CAAAA,oCAAoCH,yBAAyBL,OAAO,AAAD,MAAO,QAAQQ,sCAAsC,KAAK,IAAI,KAAK,IAAIA,kCAAkCQ,YAAY;YACvM1B,mBAAmBO;QACvB;IACJ,GAAG;QACCX;QACAiB;QACAnB;QACAC;QACAE;KACH;IACD,MAAM8B,sBAAsB,CAACP;QACzB,IAAIJ,kBAAkBN,OAAO,EAAE;YAC3BM,kBAAkBN,OAAO,CAACU;QAC9B;IACJ;IACA,MAAMQ,mBAAmBC,IAAAA,uCAAuB,EAAC;QAC7C,GAAGrC,KAAK;QACRQ;QACAC;QACAC;QACAW;QACAiB,wBAAwBH;QACxBZ;IACJ;IACA,OAAO;QACH,GAAGa,gBAAgB;QACnBG,YAAY;YACR,GAAGH,iBAAiBG,UAAU;YAC9BC,WAAW;QACf;QACAA,WAAWC,oBAAI,CAACC,MAAM,CAAC1C,MAAMwC,SAAS,EAAE;YACpCG,cAAc;gBACVC,KAAKvB;YACT;YACAwB,aAAa;QACjB;IACJ;AACJ"}