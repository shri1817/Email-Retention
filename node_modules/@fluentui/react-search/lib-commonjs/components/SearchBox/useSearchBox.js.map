{"version":3,"sources":["useSearchBox.js"],"sourcesContent":["import * as React from 'react';\nimport { isResolvedShorthand, mergeCallbacks, slot, useControllableState, useEventCallback, useMergedRefs } from '@fluentui/react-utilities';\nimport { useInput_unstable } from '@fluentui/react-input';\nimport { DismissRegular, SearchRegular } from '@fluentui/react-icons';\n/**\n * Create the state required to render SearchBox.\n *\n * The returned state can be modified with hooks such as useSearchBoxStyles_unstable,\n * before being passed to renderSearchBox_unstable.\n *\n * @param props - props from this instance of SearchBox\n * @param ref - reference to root HTMLElement of SearchBox\n */ export const useSearchBox_unstable = (props, ref)=>{\n    const { size = 'medium', disabled = false, root, contentBefore, dismiss, contentAfter, ...inputProps } = props;\n    const searchBoxRootRef = React.useRef(null);\n    const searchBoxRef = React.useRef(null);\n    const [value, setValue] = useControllableState({\n        state: props.value,\n        defaultState: props.defaultValue,\n        initialState: ''\n    });\n    // Tracks the focus of the component for the contentAfter and dismiss button\n    const [focused, setFocused] = React.useState(false);\n    const onFocus = useEventCallback(()=>{\n        setFocused(true);\n    });\n    const onBlur = useEventCallback((ev)=>{\n        var _searchBoxRootRef_current;\n        setFocused(!!((_searchBoxRootRef_current = searchBoxRootRef.current) === null || _searchBoxRootRef_current === void 0 ? void 0 : _searchBoxRootRef_current.contains(ev.relatedTarget)));\n    });\n    const rootProps = slot.resolveShorthand(root);\n    const handleDismissClick = useEventCallback((event)=>{\n        var _props_onChange;\n        if (isResolvedShorthand(dismiss)) {\n            var _dismiss_onClick;\n            (_dismiss_onClick = dismiss.onClick) === null || _dismiss_onClick === void 0 ? void 0 : _dismiss_onClick.call(dismiss, event);\n        }\n        const newValue = '';\n        setValue(newValue);\n        (_props_onChange = props.onChange) === null || _props_onChange === void 0 ? void 0 : _props_onChange.call(props, event, {\n            value: newValue\n        });\n    });\n    const inputState = useInput_unstable({\n        type: 'search',\n        disabled,\n        size,\n        value,\n        root: slot.always({\n            ...rootProps,\n            ref: useMergedRefs(rootProps === null || rootProps === void 0 ? void 0 : rootProps.ref, searchBoxRootRef),\n            onFocus: useEventCallback(mergeCallbacks(rootProps === null || rootProps === void 0 ? void 0 : rootProps.onFocus, onFocus)),\n            onBlur: useEventCallback(mergeCallbacks(rootProps === null || rootProps === void 0 ? void 0 : rootProps.onBlur, onBlur))\n        }, {\n            elementType: 'span'\n        }),\n        contentBefore: slot.optional(contentBefore, {\n            renderByDefault: true,\n            defaultProps: {\n                children: /*#__PURE__*/ React.createElement(SearchRegular, null)\n            },\n            elementType: 'span'\n        }),\n        contentAfter: slot.optional(contentAfter, {\n            renderByDefault: true,\n            elementType: 'span'\n        }),\n        ...inputProps,\n        onChange: useEventCallback((ev)=>{\n            var _props_onChange;\n            const newValue = ev.target.value;\n            (_props_onChange = props.onChange) === null || _props_onChange === void 0 ? void 0 : _props_onChange.call(props, ev, {\n                value: newValue\n            });\n            setValue(newValue);\n        })\n    }, useMergedRefs(searchBoxRef, ref));\n    const state = {\n        ...inputState,\n        components: {\n            ...inputState.components,\n            dismiss: 'span'\n        },\n        dismiss: slot.optional(dismiss, {\n            defaultProps: {\n                children: /*#__PURE__*/ React.createElement(DismissRegular, null),\n                role: 'button',\n                'aria-label': 'clear',\n                tabIndex: -1\n            },\n            renderByDefault: true,\n            elementType: 'span'\n        }),\n        disabled,\n        focused,\n        size\n    };\n    if (state.dismiss) {\n        state.dismiss.onClick = handleDismissClick;\n    }\n    return state;\n};\n"],"names":["useSearchBox_unstable","props","ref","size","disabled","root","contentBefore","dismiss","contentAfter","inputProps","searchBoxRootRef","React","useRef","searchBoxRef","value","setValue","useControllableState","state","defaultState","defaultValue","initialState","focused","setFocused","useState","onFocus","useEventCallback","onBlur","ev","_searchBoxRootRef_current","current","contains","relatedTarget","rootProps","slot","resolveShorthand","handleDismissClick","event","_props_onChange","isResolvedShorthand","_dismiss_onClick","onClick","call","newValue","onChange","inputState","useInput_unstable","type","always","useMergedRefs","mergeCallbacks","elementType","optional","renderByDefault","defaultProps","children","createElement","SearchRegular","target","components","DismissRegular","role","tabIndex"],"mappings":"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"}