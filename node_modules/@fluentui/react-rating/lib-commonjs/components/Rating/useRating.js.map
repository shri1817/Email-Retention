{"version":3,"sources":["useRating.js"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, isHTMLElement, mergeCallbacks, slot, useControllableState, useId } from '@fluentui/react-utilities';\nimport { RatingItem } from '../../RatingItem';\nimport { StarFilled, StarRegular } from '@fluentui/react-icons';\n/**\n * Create the state required to render Rating.\n *\n * The returned state can be modified with hooks such as useRatingStyles_unstable,\n * before being passed to renderRating_unstable.\n *\n * @param props - props from this instance of Rating\n * @param ref - reference to root HTMLElement of Rating\n */ export const useRating_unstable = (props, ref)=>{\n    const generatedName = useId('rating-');\n    const { color = 'neutral', iconFilled = StarFilled, iconOutline = StarRegular, max = 5, name = generatedName, onChange, step = 1, size = 'extra-large' } = props;\n    const [value, setValue] = useControllableState({\n        state: props.value,\n        defaultState: props.defaultValue,\n        initialState: 0\n    });\n    const isRatingRadioItem = (target)=>isHTMLElement(target, {\n            constructorName: 'HTMLInputElement'\n        }) && target.type === 'radio' && target.name === name;\n    const [hoveredValue, setHoveredValue] = React.useState(undefined);\n    // Generate the child RatingItems and memoize them to prevent unnecessary re-rendering\n    const rootChildren = React.useMemo(()=>{\n        return Array.from(Array(max), (_, i)=>/*#__PURE__*/ React.createElement(RatingItem, {\n                value: i + 1,\n                key: i + 1\n            }));\n    }, [\n        max\n    ]);\n    const state = {\n        color,\n        iconFilled,\n        iconOutline,\n        name,\n        step,\n        size,\n        value,\n        hoveredValue,\n        components: {\n            root: 'div'\n        },\n        root: slot.always(getIntrinsicElementProps('div', {\n            ref,\n            children: rootChildren,\n            role: 'radiogroup',\n            ...props\n        }, [\n            'onChange'\n        ]), {\n            elementType: 'div'\n        })\n    };\n    state.root.onChange = (ev)=>{\n        if (isRatingRadioItem(ev.target)) {\n            const newValue = parseFloat(ev.target.value);\n            if (!isNaN(newValue)) {\n                setValue(newValue);\n                onChange === null || onChange === void 0 ? void 0 : onChange(ev, {\n                    type: 'change',\n                    event: ev,\n                    value: newValue\n                });\n            }\n        }\n    };\n    state.root.onMouseOver = mergeCallbacks(props.onMouseOver, (ev)=>{\n        if (isRatingRadioItem(ev.target)) {\n            const newValue = parseFloat(ev.target.value);\n            if (!isNaN(newValue)) {\n                setHoveredValue(newValue);\n            }\n        }\n    });\n    state.root.onMouseLeave = mergeCallbacks(props.onMouseLeave, (ev)=>{\n        setHoveredValue(undefined);\n    });\n    return state;\n};\n"],"names":["useRating_unstable","props","ref","generatedName","useId","color","iconFilled","StarFilled","iconOutline","StarRegular","max","name","onChange","step","size","value","setValue","useControllableState","state","defaultState","defaultValue","initialState","isRatingRadioItem","target","isHTMLElement","constructorName","type","hoveredValue","setHoveredValue","React","useState","undefined","rootChildren","useMemo","Array","from","_","i","createElement","RatingItem","key","components","root","slot","always","getIntrinsicElementProps","children","role","elementType","ev","newValue","parseFloat","isNaN","event","onMouseOver","mergeCallbacks","onMouseLeave"],"mappings":";;;;+BAYiBA;;;eAAAA;;;;iEAZM;gCACoF;4BAChF;4BACa;AAS7B,MAAMA,qBAAqB,CAACC,OAAOC;IAC1C,MAAMC,gBAAgBC,IAAAA,qBAAK,EAAC;IAC5B,MAAM,EAAEC,QAAQ,SAAS,EAAEC,aAAaC,sBAAU,EAAEC,cAAcC,uBAAW,EAAEC,MAAM,CAAC,EAAEC,OAAOR,aAAa,EAAES,QAAQ,EAAEC,OAAO,CAAC,EAAEC,OAAO,aAAa,EAAE,GAAGb;IAC3J,MAAM,CAACc,OAAOC,SAAS,GAAGC,IAAAA,oCAAoB,EAAC;QAC3CC,OAAOjB,MAAMc,KAAK;QAClBI,cAAclB,MAAMmB,YAAY;QAChCC,cAAc;IAClB;IACA,MAAMC,oBAAoB,CAACC,SAASC,IAAAA,6BAAa,EAACD,QAAQ;YAClDE,iBAAiB;QACrB,MAAMF,OAAOG,IAAI,KAAK,WAAWH,OAAOZ,IAAI,KAAKA;IACrD,MAAM,CAACgB,cAAcC,gBAAgB,GAAGC,OAAMC,QAAQ,CAACC;IACvD,sFAAsF;IACtF,MAAMC,eAAeH,OAAMI,OAAO,CAAC;QAC/B,OAAOC,MAAMC,IAAI,CAACD,MAAMxB,MAAM,CAAC0B,GAAGC,IAAI,WAAW,GAAGR,OAAMS,aAAa,CAACC,sBAAU,EAAE;gBAC5ExB,OAAOsB,IAAI;gBACXG,KAAKH,IAAI;YACb;IACR,GAAG;QACC3B;KACH;IACD,MAAMQ,QAAQ;QACVb;QACAC;QACAE;QACAG;QACAE;QACAC;QACAC;QACAY;QACAc,YAAY;YACRC,MAAM;QACV;QACAA,MAAMC,oBAAI,CAACC,MAAM,CAACC,IAAAA,wCAAwB,EAAC,OAAO;YAC9C3C;YACA4C,UAAUd;YACVe,MAAM;YACN,GAAG9C,KAAK;QACZ,GAAG;YACC;SACH,GAAG;YACA+C,aAAa;QACjB;IACJ;IACA9B,MAAMwB,IAAI,CAAC9B,QAAQ,GAAG,CAACqC;QACnB,IAAI3B,kBAAkB2B,GAAG1B,MAAM,GAAG;YAC9B,MAAM2B,WAAWC,WAAWF,GAAG1B,MAAM,CAACR,KAAK;YAC3C,IAAI,CAACqC,MAAMF,WAAW;gBAClBlC,SAASkC;gBACTtC,aAAa,QAAQA,aAAa,KAAK,IAAI,KAAK,IAAIA,SAASqC,IAAI;oBAC7DvB,MAAM;oBACN2B,OAAOJ;oBACPlC,OAAOmC;gBACX;YACJ;QACJ;IACJ;IACAhC,MAAMwB,IAAI,CAACY,WAAW,GAAGC,IAAAA,8BAAc,EAACtD,MAAMqD,WAAW,EAAE,CAACL;QACxD,IAAI3B,kBAAkB2B,GAAG1B,MAAM,GAAG;YAC9B,MAAM2B,WAAWC,WAAWF,GAAG1B,MAAM,CAACR,KAAK;YAC3C,IAAI,CAACqC,MAAMF,WAAW;gBAClBtB,gBAAgBsB;YACpB;QACJ;IACJ;IACAhC,MAAMwB,IAAI,CAACc,YAAY,GAAGD,IAAAA,8BAAc,EAACtD,MAAMuD,YAAY,EAAE,CAACP;QAC1DrB,gBAAgBG;IACpB;IACA,OAAOb;AACX"}